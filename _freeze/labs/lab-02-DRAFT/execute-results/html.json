{
  "hash": "59a742cce8568ea696fabc82f49ab266",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab 02: Linear regression\"\nsubtitle: \"\"\nexecute:\n  freeze: auto\n  echo: true\n  eval: false\n  warning: false\n  message: false\nformat: html\n---\n\n\n\n::: callout-important\n## Due date\n\nThis lab is due on **Tuesday, January 28 at 11:59pm**. To be considered on time, the following must be done by the due date:\n\n-   Final `.qmd` and `.pdf` files pushed to your GitHub repo\n-   Final `.pdf` file submitted on Gradescope\n:::\n\n# Introduction \n\nIn today’s lab you will analyze data from over 1,000 different coffees to explore the relationship between a coffee’s aroma, flavor, and overall quality using linear regression.\n\n## Learning goals\n\nBy the end of the lab, you will...\n\n-   Continue developing a reproducible workflow using RStudio and GitHub\n-   Produce visualizations and summary statistics to describe distributions\n-   Fit, interpret, and evaluate linear regression models\n-   Use the matrix representation of the linear regression model to estimate coefficients\n-   Explore properties of the linear regression model\n\n# Getting Started\n\n-   Go to the [sta221-sp25](https://www.github.com/sta221-sp25) organization on GitHub. Click on the repo with the prefix **lab-02**. It contains the starter documents you need to complete the lab.\n\n-   Clone the repo and start a new project in RStudio. See the [Lab 00 instructions](https://sta221-sp25.netlify.app/labs/lab-00#getting-started) for details on cloning a repo and starting a new project in R.\n\n# Packages\n\nYou will need the following packages for the lab:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels) # contains broom, yardstick, and other modeling packages\nlibrary(knitr)\n\n# add other packages as needed\n```\n:::\n\n\n\n# Data: Coffee ratings \n\nThe data set for this lab comes from the [Coffee Quality Database](https://github.com/jldbc/coffee-quality-database) and was obtained from the [#TidyTuesday GitHub repo](https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-07-07/readme.md). It includes information about the origin, producer, measures of various characteristics, and the quality measure for over 1,000 coffees. The coffees can be reasonably be treated as a random sample.\n\nThis lab will focus on the following variables:\n\n-   `total_cup_points`: Total rating/points (0 - 100 scale)\n\n-   `aroma`: Aroma grade, 0 (worst aroma) - 10 (best aroma)\n\n-   `flavor`: Flavor grade, 0 (worst flavor) - 10 (best flavor)\n\n-   <!--# maybe add a second variable-->\n\n[Click here](https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-07-07/readme.md) for the definitions of all variables in the data set. [Click here](http://www.scaa.org/?page=resources&d=cupping-protocols&mod=article_inline) for more details about how these measures are obtained.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ncoffee <- read_csv(\"data/coffee-ratings.csv\")\n```\n:::\n\n\n\n# Exercises\n\n**Goal:** The goal of this analysis is to use a coffee's aroma and flavor to understand variability in it total cup points.\n\n------------------------------------------------------------------------\n\nWrite all code and narrative in your Quarto file. Write all narrative in complete sentences. Throughout the assignment, you should periodically **render** your Quarto document to produce the updated PDF, **commit** the changes in the Git pane, and **push** the updated files to GitHub.\n\n::: callout-important\nMake sure we can read all of your code in your PDF document. This means you will need to break up long lines of code. One way to help avoid long lines of code is is start a new line after every pipe (`|>`) and plus sign (`+`).\n:::\n\n## Exercise 1\n\nWe begin with univariate exploratory data analysis.\n\na.  Visualize the distribution of the response variable `total_cup_points` and calculate summary statistics.\nb.  Comment on the features of the distribution of this variable by describing the shape, center, spread, and presence of potential outliers.\nc.  Based on this distribution, do you think the data set is representative of all coffee available to consumers? Briefly explain.\n\n::: callout-tip\nMake sure your data visualizations have clear and informative **titles** and **axis labels**.\n:::\n\n## Exercise 2\n\nNow let's consider the relationship between how good a coffee smells and its overall quality.\n\na.  Visualize the relationship between `aroma` and `total_cup_points`.\nb.  Does there appear to be a relationship between a coffee's aroma and its overall quality? If so, what is the shape and direction of the relationship?\n\n## Exercise 3\n\nWe have seen the mathematical formulation for simple linear regression in class. In particular, given a response variable $Y$ and predictor variable $X$, the simple linear regression model is $$Y = \\beta_0 + \\beta_1 X + \\epsilon$$\n\nfor some unknown regression coefficients for slope and intercept$(\\beta_0, \\beta_1)$ and error terms $\\epsilon$ that are centered at 0 and have variance $\\sigma^2_{\\epsilon}$ . This means that the expected value of each observation lies on the regression line\\\n$$ E(Y|X) = \\beta_0 + \\beta_1 X$$\n\nAnswer the following questions about simple linear regression. Your response should be in general terms about simple linear, <u>not</u> be specific to the `coffee` data.\n\na.  What does $E(Y|X) = \\beta_0 + \\beta_1X$ mean in terms of a given value of $X$?\nb.  What are the interpretations of the coefficients $\\beta_0$ and $\\beta_1$ in terms of the expected value of $Y$?\n\n::: render-commit-push\nThis is a good place to render, commit, and push changes to your lab-01 repo on GitHub. Write an informative commit message (e.g., \"Completed exercises 1 - 3\"), and push every file to GitHub by clicking the check box next to each file in the Git pane. After you push the changes, the Git pane in RStudio should be empty.\n:::\n\n## Exercise 4\n\na.  Fit the model of the relationship between `aroma` and `total_cup_points`. Neatly display the output using 3 digits.\nb.  Interpret the slope in the context of the data.\nc.  What is the expected `total_cup_points` for coffees that receive the worst aroma score of `0`? Is this a reliable estimate of the `total_cup_points` for these coffees? Briefly explain why or why not.\n\n## Exercise 5\n\nNow let's add flavor to the model, so we will use both flavor and aroma to understand variability in the overall quality of coffees.\n\nIn class we have seen how vectors and matrices can be used to represent the linear regression model:\n\n$$\n\\mathbf{y} = \\mathbf{X}\\boldsymbol{\\beta} + \\mathbf{\\epsilon}\n$$\n\na.  State the dimensions of $\\mathbf{y}, \\mathbf{X}, \\boldsymbol{\\beta}, \\boldsymbol{\\epsilon}$ for this model. Your answer should have exact values given the `coffee` data set.\nb.  Compute the estimated regression coefficients using the matrix form of the model. Show the code used to get the answer.\n\n::: callout-tip\nYou can use the `model.matrix()` function to get the design matrix. The code takes the general form:\n\n<center>\n\n`model.matrix(y ~ x, data = my_data)`\n\n</center>\n\nSee [Lab 01](https://sta221-sp25.netlify.app/labs/lab-01.html#matrix-operations-in-r) for other matrix operations in R.\n:::\n\nc.  Check your results from part (b) by using the `lm` function to fit the model. Neatly display your results using 3 digits.\nd.  Write the estimated regression equation.\n\n::: render-commit-push\nThis is a good place to render, commit, and push changes to your lab-01 repo on GitHub. Write an informative commit message (e.g., \"Completed exercises 4 - 5\"), and push every file to GitHub by clicking the check box next to each file in the Git pane. After you push the changes, the Git pane in RStudio should be empty.\n:::\n\n## Exercise 6\n\na.  The coefficient for `aroma` for the model fit in Exercise 5 is different than the coefficient from the model fit in Exercise 4. Briefly explain why these coefficients are different.\nb.  Would you willingly drink a coffee represented by the intercept of the model in Exercise 5? Briefly explain why or why not.\n\n## Exercise 7 \n\na.  Compute $\\mathbf{H}$, the hat matrix corresponding to the model from Exercise 5. Then use $\\mathbf{H}$ to compute the residuals for this model. **Do not print out** $\\mathbf{H}$ **or the residuals.**\n\nb.  Compute the mean and standard deviation of the residuals.\n\nc.  Recall root mean square error RMSE\n\n    $$\n    RMSE = \\sqrt{\\frac{\\sum_{i=1}^n(y_i - \\hat{y}_i)^2}{n}}\n    $$\n\n    Similar to other statistics we've seen thus far, we can write the RMSE in matrix form. Compute RMSE for the model from Exercise 5 using matrix form. Show the code used to get the answer.\n\nd.  How do the standard deviation of the residuals and RMSE compare?\n\n::: render-commit-push\nYou’re done and ready to submit your work! render, commit, and push all remaining changes. You can use the commit message “Done with Lab 02!”, and make sure you have pushed all the files to GitHub (your Git pane in RStudio should be empty) and that [all]{.underline} documents are updated in your repo on GitHub. The PDF document you submit to Gradescope should be identical to the one in your GitHub repo.\n:::\n\n# Submission\n\nYou will submit the PDF documents for labs, homework, and exams in to Gradescope as part of your final submission.\n\n::: callout-warning\nBefore you wrap up the assignment, make sure all documents are updated on your GitHub repo. We will be checking these to make sure you have been practicing how to commit and push changes.\n\nRemember – you must turn in a PDF file to the Gradescope page before the submission deadline for full credit.\n:::\n\nTo submit your assignment:\n\n-   Access Gradescope through the menu on the [STA 221 Canvas site.](https://canvas.duke.edu/courses/51767)\n\n-   Click on the assignment, and you’ll be prompted to submit it.\n\n-   Mark the pages associated with each exercise. All of the pages of your lab should be associated with at least one question (i.e., should be “checked”).\n\n-   Select the first page of your .PDF submission to be associated with the *“Workflow & formatting”* section.\n\n# Grading\n\n| Component             | Points |\n|:----------------------|:-------|\n| Ex 1                  | 6      |\n| Ex 2                  | 5      |\n| Ex 3                  | 7      |\n| Ex 4                  | 7      |\n| Ex 5                  | 8      |\n| Ex 6                  | 5      |\n| Ex 7                  | 8      |\n| Workflow & formatting | 4      |\n\nThe \"Workflow & formatting\" grade is to assess the reproducible workflow and document format. This includes having at least 3 informative commit messages, a neatly organized document with readable code and your name and the date updated in the YAML.\n",
    "supporting": [
      "lab-02-draft_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}