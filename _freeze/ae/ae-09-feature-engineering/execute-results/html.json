{
  "hash": "dfc818c853c9ebb44bd9e1d183cffa0f",
  "result": {
    "markdown": "---\ntitle: \"AE 09: Feature engineering with recipes\"\nsubtitle: \"Peer-to-peer lender\"\ndate: \"Oct 09, 2023\"\neditor: visual\n---\n\n\n::: callout-important\nGo to the [course GitHub organization](https://github.com/sta210-fa23) and locate your `ae-09` repo to get started.\n\nRender, commit, and push your responses to GitHub by the end of class. The responses are due in your GitHub repo no later than Thursday, October 12 at 11:59pm.\n:::\n\n## Packages + data\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(knitr)\nlibrary(openintro)\n```\n:::\n\n\nThe data for this AE is from the `loan50` data set in the **openintro** R package. We will focus on the following variables:\n\n**Predictors**\n\n-   `annual_income`: Annual income (in US dollars)\n-   `debt_to_income`: Debt-to-income ratio, i.e. the percentage of a borrower's total debt divided by their total income\n-   `verified_income`: Whether borrower's income source and amount have been verified (`Not Verified`, `Source Verified`, `Verified`)\n\n**Response**\n\n-   `interest_rate`: Interest rate for the loan (0- 100)\n\n## Analysis goal\n\nThe goals of this analysis are to build a recipe to fit a linear regression model on the training data that has the following features:\n\n-   `annual_income` rescaled to thousands of dollars\n-   Mean-centered quantitative variables\n-   Indicator (dummy) variables for the categorical predictor\n-   Interaction term between rescaled `annual_income` and `verified_income`\n\nand (2) use `prep()` and `bake()` to check the recipe\n\n## Test/train split\n\nFill in the code to split the data into 90% training, 10% testing.\n\n::: callout-important\nRemove `#| eval: false` from the code chunk.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(123)\n\nloans_split <- initial_split(loan50, prop = _____)\nloan_train <- training(_____)\nloan_test  <- _____(loan_split)\n```\n:::\n\n\n## Build a recipe\n\n-   Use `step_mutate()` to create a new variable `annual_income_th` that is `annual_income` rescaled to thousands of dollars\n\n-   Use `step_center()` to mean-center quantitative variables\n\n-   Use `step_dummy()` to create indicator variables for the categorical predictor\n\n-   Use `step_interact()` to create interaction between `annual_income_th` and `verified_income`\n\n::: callout-important\nRemove `#| eval: false` from the code chunk.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# use original variables when specifying recipe\nloan_rec <-  recipe(interest_rate ~ annaul_income + debt_to_income + verified_income, \n                    data = loan_train) |>\n  # add recipe steps\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nloan_rec\n```\n:::\n\n\n## Check recipe using `prep()` and `bake()`\n\nRemove #\\| eval: false from the code chunk\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# determine required parameters to be estimated\nloan_rec_trained <- prep(loan_rec)\n\n# apply recipe computations to data\nbake(loan_rec_trained, loan_train) |>\n  glimpse()\n```\n:::\n\n\n## To submit the AE\n\n::: callout-important\n-   Render the document to produce the PDF with all of your work from today's class.\n-   Push all your work to your `ae-09` repo on GitHub. (You do not submit AEs on Gradescope).\n:::\n",
    "supporting": [
      "ae-09-feature-engineering_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}