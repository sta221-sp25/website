{
  "hash": "48c0e6975413bc445b849c89b8afbea3",
  "result": {
    "markdown": "---\ntitle: \"AE 09: Model comparison\"\nsubtitle: \"Restaurant tips\"\ndate: \"Oct 19, 2022\"\neditor: visual\n---\n\n\n::: callout-important\nGo to the [course GitHub organization](https://github.com/sta210-fa22) and locate your `ae-09`- to get started.\n\nThe AE is due on GitHub by Saturday, October 22 at 11:59pm.\n:::\n\n## Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(viridis)\nlibrary(knitr)\nlibrary(patchwork)\n```\n:::\n\n\n## Load data\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntips <- read_csv(\"data/tip-data.csv\") |>\n  filter(!is.na(Party))\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# relevel factors\ntips <- tips |>\n  mutate(\n    Meal = fct_relevel(Meal, \"Lunch\", \"Dinner\", \"Late Night\"),\n    Age  = fct_relevel(Age, \"Yadult\", \"Middle\", \"SenCit\")\n  )\n```\n:::\n\n\n## Exploratory data analysis\n\n### Response variable\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(tips, aes(x = Tip)) +\n  geom_histogram(binwidth = 1) +\n  labs(title = \"Distribution of tips\")\n```\n\n::: {.cell-output-display}\n![](ae-09-model-comparison_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n### Predictor variables\n\n\n::: {.cell}\n\n```{.r .cell-code}\np1 <- ggplot(tips, aes(x = Party)) +\n  geom_histogram(binwidth = 1) +\n  labs(title = \"Number of people in party\")\n\np2 <- ggplot(tips, aes(x = Meal, fill = Meal)) +\n  geom_bar() +\n  labs(title = \"Meal type\") +\n  scale_fill_viridis_d()\n\np3 <- ggplot(tips, aes(x = Age, fill = Age)) +\n  geom_bar() +\n  labs(title = \"Age of payer\") +\n  scale_fill_viridis_d(option = \"E\", end = 0.8)\n\np1 + (p2 / p3)\n```\n\n::: {.cell-output-display}\n![](ae-09-model-comparison_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n### Response vs. predictors\n\n\n::: {.cell}\n\n```{.r .cell-code}\np4 <- ggplot(tips, aes(x = Party, y = Tip)) +\n  geom_point(color = \"#5B888C\")\n\np5 <- ggplot(tips, aes(x = Meal, y = Tip, fill = Meal)) +\n  geom_boxplot(show.legend = FALSE) +\n  scale_fill_viridis_d()\n\np6 <- ggplot(tips, aes(x = Age, y = Tip, fill = Age)) +\n  geom_boxplot(show.legend = FALSE) +\n  scale_fill_viridis_d(option = \"E\", end = 0.8)\n\np4 + p5 + p6\n```\n\n::: {.cell-output-display}\n![](ae-09-model-comparison_files/figure-html/unnamed-chunk-5-1.png){width=1152}\n:::\n:::\n\n\n## Models\n\n### Model 1: Tips vs. Age & Party\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntip_fit <- linear_reg() |>\n  set_engine(\"lm\") |>\n  fit(Tip ~ Party + Age, data = tips)\n\ntidy(tip_fit) |>\n  kable(digits = 3)\n```\n\n::: {.cell-output-display}\n|term        | estimate| std.error| statistic| p.value|\n|:-----------|--------:|---------:|---------:|-------:|\n|(Intercept) |   -0.170|     0.366|    -0.465|   0.643|\n|Party       |    1.837|     0.124|    14.758|   0.000|\n|AgeMiddle   |    1.009|     0.408|     2.475|   0.014|\n|AgeSenCit   |    1.388|     0.485|     2.862|   0.005|\n:::\n:::\n\n\n### Model 2: Tips vs. Age, Party, Meal & Day\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntip_fit_2 <- linear_reg() |>\n  set_engine(\"lm\") |>\n  fit(Tip ~ Party +  Age + Meal +  Day, \n      data = tips)\n\ntidy(tip_fit_2) |>\n  kable(digits = 3)\n```\n\n::: {.cell-output-display}\n|term           | estimate| std.error| statistic| p.value|\n|:--------------|--------:|---------:|---------:|-------:|\n|(Intercept)    |   -0.354|     0.968|    -0.365|   0.715|\n|Party          |    1.792|     0.126|    14.179|   0.000|\n|AgeMiddle      |    0.506|     0.427|     1.185|   0.238|\n|AgeSenCit      |    1.017|     0.494|     2.058|   0.041|\n|MealDinner     |    0.636|     0.457|     1.390|   0.167|\n|MealLate Night |   -0.729|     0.754|    -0.967|   0.335|\n|DaySaturday    |    0.812|     0.783|     1.038|   0.301|\n|DaySunday      |    0.097|     0.877|     0.111|   0.912|\n|DayThursday    |    0.069|     0.897|     0.077|   0.939|\n|DayTuesday     |    0.414|     0.670|     0.618|   0.537|\n|DayWednesday   |    0.936|     1.098|     0.853|   0.395|\n:::\n:::\n\n\n::: {.callout-note appearance=\"minimal\" icon=\"false\"}\nWhy did we not use the full `recipe()` workflow to fit Model 1 or Model 2?\n:::\n\n## $R^2$ and Adjusted $R^2$\n\nFill in the code below to calculate $R^2$ and Adjusted $R^2$ for Model 1. Put `eval: true` once the code is updated.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglance(______) |>\n  select(r.squared, adj.r.squared)\n```\n:::\n\n\nCalculate $R^2$ and Adjusted $R^2$ for Model 2.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# r-sq and adj. r-sq for model 2\n```\n:::\n\n\n::: {.callout-note appearance=\"minimal\" icon=\"false\"}\nWe would like to choose the model that better fits the data.\n\n-   Which model would we choose based on $R^2$?\n\n-   Which model would we choose based on Adjusted $R^2$?\n\n-   Which statistic should we use to choose the final model - $R^2$ or Adjusted $R^2$? Why?\n:::\n\n## AIC & BIC\n\nUse the `glance()` function to calculate AIC and BIC for Models 1 and 2.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n## AIC and BIC for Model 1\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n## AIC and BIC for Model 2\n```\n:::\n\n\n::: {.callout-note appearance=\"minimal\"}\nWe would like to choose the model that better fits the data.\n\n-   Which model would we choose based on AIC?\n\n-   Which model would we choose based on BIC?\n:::\n\n## Evaluating analysis process\n\n::: {.callout-note appearance=\"minimal\"}\nWe fit and evaluated these models using the entire data set. What is a limitation to using the entire data set to fit and evaluate models?\n:::\n",
    "supporting": [
      "ae-09-model-comparison_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}